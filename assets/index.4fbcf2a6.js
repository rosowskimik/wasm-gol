const x=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const g of i.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&a(g)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}};x();let c,C=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});C.decode();let _=null;function F(){return(_===null||_.buffer!==c.memory.buffer)&&(_=new Uint8Array(c.memory.buffer)),_}function B(n,e){return C.decode(F().subarray(n,n+e))}function P(n){return()=>{throw new Error(`${n} is not defined`)}}const T=Object.freeze({Dead:0,"0":"Dead",Alive:1,"1":"Alive"});class A{static __wrap(e){const r=Object.create(A.prototype);return r.ptr=e,r}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();c.__wbg_universe_free(e)}constructor(e,r){var a=c.universe_new(e,r);return A.__wrap(a)}resize(e,r){c.universe_resize(this.ptr,e,r)}toggleCell(e,r){c.universe_toggleCell(this.ptr,e,r)}fillRandom(){c.universe_fillRandom(this.ptr)}reset(){c.universe_reset(this.ptr)}tick(){c.universe_tick(this.ptr)}getIndex(e,r){var a=c.universe_getIndex(this.ptr,e,r);return a>>>0}cells(){var e=c.universe_cells(this.ptr);return e}}async function W(n,e){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,e)}catch(a){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",a);else throw a}const r=await n.arrayBuffer();return await WebAssembly.instantiate(r,e)}else{const r=await WebAssembly.instantiate(n,e);return r instanceof WebAssembly.Instance?{instance:r,module:n}:r}}async function E(n){typeof n=="undefined"&&(n=new URL("/wasm-gol/assets/gol-backend_bg.f761bd21.wasm",self.location));const e={};e.wbg={},e.wbg.__wbg_random_a582babfa4489c72=typeof Math.random=="function"?Math.random:P("Math.random"),e.wbg.__wbindgen_throw=function(o,i){throw new Error(B(o,i))},(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:r,module:a}=await W(await n,e);return c=r.exports,E.__wbindgen_wasm_module=a,c}const s=10,N="#cccccc",z="#ffffff",U="#000000";async function j(){const{memory:n}=await E(),e=document.querySelector("#toggle"),r=document.querySelector("#step"),a=document.querySelector("#reset"),o=document.querySelector("#random"),i=document.querySelector("#resize"),g=document.querySelector("#width"),R=document.querySelector("#height"),l=document.querySelector("#gol-canvas"),u=l.getContext("2d");let f=g.valueAsNumber,d=R.valueAsNumber;l.width=(s+1)*f+1,l.height=(s+1)*d+1;const h=new A(f,d),q=()=>{u.clearRect(0,0,l.width,l.height),u.beginPath(),u.strokeStyle=N;for(let t=0;t<=f;t++)u.moveTo(t*(s+1)+.5,0),u.lineTo(t*(s+1)+.5,(s+1)*d+1);for(let t=0;t<=d;t++)u.moveTo(0,t*(s+1)+.5),u.lineTo((s+1)*f+1,t*(s+1)+.5);u.stroke()},b=()=>{const t=h.cells(),y=new Uint8Array(n.buffer,t,f*d);u.beginPath();for(let w=0;w<d;w++)for(let p=0;p<f;p++){const L=h.getIndex(p,w);u.fillStyle=y[L]===T.Dead?z:U,u.fillRect(p*(s+1)+1,w*(s+1)+1,s,s)}};let m=null;const S=()=>{h.tick(),b()},D=()=>{S(),m=requestAnimationFrame(D)},O=()=>{e.textContent="Pause",m=requestAnimationFrame(D)},v=()=>{m&&(cancelAnimationFrame(m),m=null),e.textContent="Play"};e.addEventListener("click",t=>{t.preventDefault(),m?v():O()}),r.addEventListener("click",t=>{t.preventDefault(),v(),requestAnimationFrame(S)}),a.addEventListener("click",t=>{t.preventDefault(),v(),h.reset(),m===null&&requestAnimationFrame(b)}),o.addEventListener("click",t=>{t.preventDefault(),h.fillRandom(),m===null&&requestAnimationFrame(b)}),i.addEventListener("click",t=>{t.preventDefault(),v(),f=g.valueAsNumber,d=R.valueAsNumber,l.width=(s+1)*f+1,l.height=(s+1)*d+1,h.resize(f,d),q()}),l.addEventListener("click",t=>{t.preventDefault();const y=l.getBoundingClientRect(),w=l.width/y.width,p=l.height/y.height,L=(t.clientX-y.left)*w,k=(t.clientY-y.top)*p,M=Math.min(Math.floor(L/(s+1)),f-1),I=Math.min(Math.floor(k/(s+1)),d-1);h.toggleCell(M,I),requestAnimationFrame(b)}),q()}j();
