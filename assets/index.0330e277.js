!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();let e,t=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});t.decode();let n=null;function r(r,i){return t.decode((null!==n&&n.buffer===e.memory.buffer||(n=new Uint8Array(e.memory.buffer)),n).subarray(r,r+i))}const i=Object.freeze({Dead:0,0:"Dead",Alive:1,1:"Alive"});class o{static __wrap(e){const t=Object.create(o.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const t=this.__destroy_into_raw();e.__wbg_universe_free(t)}constructor(t,n){var r=e.universe_new(t,n);return o.__wrap(r)}resize(t,n){e.universe_resize(this.ptr,t,n)}toggleCell(t,n){e.universe_toggleCell(this.ptr,t,n)}fillRandom(){e.universe_fillRandom(this.ptr)}reset(){e.universe_reset(this.ptr)}tick(){e.universe_tick(this.ptr)}getIndex(t,n){return e.universe_getIndex(this.ptr,t,n)>>>0}cells(){return e.universe_cells(this.ptr)}}async function s(t){void 0===t&&(t=new URL("/wasm-gol/assets/gol-backend_bg.295eb7cf.wasm",window.location));const n={};var i;n.wbg={},n.wbg.__wbg_random_727732de4695ec15="function"==typeof Math.random?Math.random:(i="Math.random",()=>{throw new Error(`${i} is not defined`)}),n.wbg.__wbindgen_throw=function(e,t){throw new Error(r(e,t))},("string"==typeof t||"function"==typeof Request&&t instanceof Request||"function"==typeof URL&&t instanceof URL)&&(t=fetch(t));const{instance:o,module:a}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(n){if("application/wasm"==e.headers.get("Content-Type"))throw n;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n)}const r=await e.arrayBuffer();return await WebAssembly.instantiate(r,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await t,n);return e=o.exports,s.__wbindgen_wasm_module=a,e}!async function(){const{memory:e}=await s(),t=document.querySelector("#toggle"),n=document.querySelector("#step"),r=document.querySelector("#reset"),a=document.querySelector("#random"),l=document.querySelector("#resize"),c=document.querySelector("#width"),u=document.querySelector("#height"),d=document.querySelector("#gol-canvas"),f=d.getContext("2d");let m=c.valueAsNumber,h=u.valueAsNumber;d.width=11*m+1,d.height=11*h+1;const y=new o(m,h),p=()=>{f.clearRect(0,0,d.width,d.height),f.beginPath(),f.strokeStyle="#cccccc";for(let e=0;e<=m;e++)f.moveTo(11*e+.5,0),f.lineTo(11*e+.5,11*h+1);for(let e=0;e<=h;e++)f.moveTo(0,11*e+.5),f.lineTo(11*m+1,11*e+.5);f.stroke()},w=()=>{const t=y.cells(),n=new Uint8Array(e.buffer,t,m*h);f.beginPath();for(let e=0;e<h;e++)for(let t=0;t<m;t++){const r=y.getIndex(t,e);f.fillStyle=n[r]===i.Dead?"#ffffff":"#000000",f.fillRect(11*t+1,11*e+1,10,10)}};let g=null;const b=()=>{y.tick(),w()},v=()=>{b(),g=requestAnimationFrame(v)},_=()=>{g&&(cancelAnimationFrame(g),g=null),t.textContent="Play"};t.addEventListener("click",(e=>{e.preventDefault(),g?_():(t.textContent="Pause",g=requestAnimationFrame(v))})),n.addEventListener("click",(e=>{e.preventDefault(),_(),requestAnimationFrame(b)})),r.addEventListener("click",(e=>{e.preventDefault(),_(),y.reset(),null===g&&requestAnimationFrame(w)})),a.addEventListener("click",(e=>{e.preventDefault(),y.fillRandom(),null===g&&requestAnimationFrame(w)})),l.addEventListener("click",(e=>{e.preventDefault(),_(),m=c.valueAsNumber,h=u.valueAsNumber,d.width=11*m+1,d.height=11*h+1,y.resize(m,h),p()})),d.addEventListener("click",(e=>{e.preventDefault();const t=d.getBoundingClientRect(),n=d.width/t.width,r=d.height/t.height,i=(e.clientX-t.left)*n,o=(e.clientY-t.top)*r,s=Math.min(Math.floor(i/11),m-1),a=Math.min(Math.floor(o/11),h-1);y.toggleCell(s,a),requestAnimationFrame(w)})),p()}();
